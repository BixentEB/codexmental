<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Test WebGL – cube</title>
<style>
  html,body{height:100%;margin:0;background:#0b1622;overflow:hidden;color:#9feaff;font:13px system-ui}
  #msg{position:fixed;left:12px;top:10px;opacity:.85}
</style>
</head>
<body>
<div id="msg">Test WebGL…</div>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script>
(function(){
  // Test WebGL
  let ok = false;
  try{
    const c = document.createElement('canvas');
    ok = !!(c.getContext('webgl') || c.getContext('experimental-webgl'));
  }catch(e){ ok = false; }
  const msg = document.getElementById('msg');
  if(!ok){
    msg.textContent = "⚠️ WebGL indisponible (accélération matérielle / pilote / navigateur).";
    document.body.style.background = "#260c0c";
    return;
  }else{
    msg.textContent = "✅ WebGL OK (cube devrait apparaître).";
  }

  // Scène minimale
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.1, 1000);
  camera.position.set(0,0,5);

  const renderer = new THREE.WebGLRenderer({antialias:true});
  renderer.setSize(innerWidth, innerHeight);
  document.body.appendChild(renderer.domElement);

  const geo = new THREE.BoxGeometry(1,1,1);
  const mat = new THREE.MeshNormalMaterial();
  const cube = new THREE.Mesh(geo, mat);
  scene.add(cube);

  function loop(){
    cube.rotation.x += 0.01;
    cube.rotation.y += 0.02;
    renderer.render(scene, camera);
    requestAnimationFrame(loop);
  }
  loop();

  addEventListener('resize', ()=>{
    camera.aspect = innerWidth/innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(innerWidth, innerHeight);
  });
})();
</script>
</body>
</html>
