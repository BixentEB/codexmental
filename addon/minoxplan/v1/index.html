<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Routine capillaire + Phases KÃ©ratine</title>
<style>
:root{
  --bg:#0b0f14; --panel:#121821; --text:#e6edf3; --muted:#8aa0b3;
  --line:#223041; --tag:#1b2431; --accent:#89d185; --warn:#ffd166;
}
*{box-sizing:border-box}
body{margin:0;background:linear-gradient(180deg,#0a111a,#0b0f14 40%);color:var(--text);
  font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Helvetica,Arial,sans-serif}
.wrap{max-width:1100px;margin:auto;padding:24px}
h1{margin:0 0 10px;font-size:clamp(20px,3.6vw,28px)}
small.muted{color:var(--muted)}
.panel{background:var(--panel);border:1px solid var(--line);border-radius:12px;padding:12px}
.tag{display:inline-block;background:var(--tag);border:1px solid var(--line);padding:2px 8px;border-radius:999px;color:#cfe7ff;font-size:.8rem}

/* Tabs */
.tabs{margin-top:14px}
.tab-head{display:flex;gap:8px;flex-wrap:wrap}
.tab-head button{
  background:var(--tag);border:1px solid var(--line);color:var(--text);padding:8px 12px;border-radius:999px;cursor:pointer
}
.tab-head button[aria-selected="true"]{background:#1c2736}
.tab{display:none;margin-top:12px}
.tab.active{display:block}

/* Week grid (Semaine type) */
.grid{display:grid;gap:12px;grid-template-columns:140px 1fr 1fr 1.1fr}
.head,.cell{background:var(--panel);border:1px solid var(--line)}
.head{padding:10px 12px;font-weight:700;text-transform:uppercase;background:linear-gradient(180deg,#131b25,#101722)}
.row{display:contents}.cell{padding:12px}.note{color:var(--muted)}
.day{font-weight:700}.subtag{margin-top:6px}
.todo{display:grid;gap:10px}
.todo label{display:grid;grid-template-columns:auto 1fr;gap:8px;align-items:baseline;background:rgba(255,255,255,.02);padding:8px;border:1px dashed var(--line);border-radius:10px}
@media(max-width:870px){.grid{grid-template-columns:1fr}.head{display:none}}
/* Keratin phases */
.k-box{display:grid;gap:12px}
.k-top{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
input[type="date"]{background:var(--tag);border:1px solid var(--line);color:var(--text);padding:8px;border-radius:10px}
.k-dosage{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.pill{border:1px solid var(--line);background:#0f1722;padding:4px 10px;border-radius:999px}
.k-timeline{display:grid;gap:10px;margin-top:8px}
.k-phase{padding:10px;border:1px dashed var(--line);border-radius:10px}
.k-phase b{display:block;margin-bottom:6px}
.k-note{color:var(--muted);font-size:.95rem}
.actions{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0}
button{background:var(--tag);border:1px solid var(--line);color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer}
button:hover{filter:brightness(1.07)}
</style>
</head>
<body>
<div class="wrap">
  <h1>ğŸŒ• Routine capillaire + Phases KÃ©ratine</h1>
  <small class="muted">
    Shampoings <b>lundi & jeudi</b> â€¢ Huile dâ€™oignon <b>la veille et le jour mÃªme</b> â€¢
    Minoxidil sur cuir chevelu <b>sec</b>. Les phases <b>kÃ©ratine</b> sont des <u>dosages par pÃ©riodes</u> (pas matin/soir).
  </small>

  <div class="tabs">
    <div class="tab-head">
      <button data-tab="week" aria-selected="true">ğŸ—“ï¸ Semaine type</button>
      <button data-tab="attack">âš¡ KÃ©ratine â€“ Phase dâ€™attaque</button>
      <button data-tab="maint">ğŸŒ¿ KÃ©ratine â€“ Phase dâ€™entretien</button>
    </div>

    <!-- Semaine type -->
    <section id="week" class="tab active">
      <div class="grid" id="weekGrid" aria-live="polite"></div>
    </section>

    <!-- KÃ©ratine â€“ Attaque -->
    <section id="attack" class="tab">
      <div class="k-box">
        <div class="k-top">
          <span class="tag">Protocole dâ€™attaque total : 45 jours</span>
          <div class="k-dosage">
            <label>DÃ©marrer le protocole le :
              <input id="startAttack" type="date">
            </label>
            <span id="attackStatus" class="pill">Jour â€” Dosage â€”</span>
            <div class="actions">
              <button id="todayAttack">Mettre sur aujourdâ€™hui</button>
              <button id="resetAttack">RÃ©initialiser</button>
            </div>
          </div>
        </div>
        <div class="k-timeline">
          <div class="k-phase">
            <b>Phase 1 (J1â€“J15) â€” 2 gÃ©lules / jour</b>
            <div class="k-note">Accent structure (kÃ©ratine, zinc, vitamines B). Prendre avec un repas et un grand verre dâ€™eau.</div>
          </div>
          <div class="k-phase">
            <b>Phase 2 (J16â€“J45) â€” 3 gÃ©lules / jour</b>
            <div class="k-note">Accent acides aminÃ©s soufrÃ©s (cystine, lysine, mÃ©thionine) + prÃªle. Hydratation rÃ©guliÃ¨re.</div>
          </div>
        </div>
        <div class="panel">
          <b>Rappel quotidien (Ã  combiner avec la Semaine type) :</b>
          <ul>
            <li>Matin : ğŸ§… Jus dâ€™oignon (â‰¤1 h) â†’ rinÃ§age â†’ sÃ©chage â†’ ğŸ’§ Minoxidil 5 %.</li>
            <li>Soir : ğŸ§… Jus dâ€™oignon (â‰¤1 h) â†’ rinÃ§age â†’ sÃ©chage â†’ ğŸ’§ Minoxidil 5 %.</li>
            <li>Huile dâ€™oignon : veille et jour de shampoing (lun/jeu), 2 h ou nuit sous charlotte.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- KÃ©ratine â€“ Entretien -->
    <section id="maint" class="tab">
      <div class="k-box">
        <div class="k-top">
          <span class="tag">Protocole dâ€™entretien total : 75 jours</span>
          <div class="k-dosage">
            <label>DÃ©marrer lâ€™entretien le :
              <input id="startMaint" type="date">
            </label>
            <span id="maintStatus" class="pill">Jour â€” Dosage â€”</span>
            <div class="actions">
              <button id="todayMaint">Mettre sur aujourdâ€™hui</button>
              <button id="resetMaint">RÃ©initialiser</button>
            </div>
          </div>
        </div>
        <div class="k-timeline">
          <div class="k-phase">
            <b>Phase 1 (J1â€“J30) â€” 1 gÃ©lule / jour</b>
            <div class="k-note">Stabilisation et entretien de la fibre.</div>
          </div>
          <div class="k-phase">
            <b>Phase 2 (J31â€“J75) â€” 2 gÃ©lules / jour</b>
            <div class="k-note">Consolidation et prÃ©vention de la chute.</div>
          </div>
        </div>
        <div class="panel">
          <b>Rappel quotidien (Ã  combiner avec la Semaine type) :</b>
          <ul>
            <li>Conserve le mÃªme rituel oignon/minoxidil et les huiles la veille/jour de shampoing.</li>
          </ul>
        </div>
      </div>
    </section>
  </div>
</div>

<script>
/* ---------- Onglets ---------- */
document.querySelectorAll('.tab-head button').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.tab-head button').forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.getElementById(btn.dataset.tab).classList.add('active');
  });
});

/* ---------- Semaine type (oignon / minoxidil / huiles) ---------- */
const week = [
  { j:"Lundi", tag:"Jour de shampoing",
    m:["ğŸ§… Jus dâ€™oignon (1 h) â†’ RinÃ§age doux â†’ SÃ©chage","ğŸ’§ Minoxidil 5 %"],
    s:["ğŸ§´ Shampoing doux â†’ SÃ©chage","ğŸ’§ Minoxidil 5 %"],
    note:"Cuir chevelu propre, prÃªt Ã  absorber les actifs." },
  { j:"Mardi",
    m:["ğŸ§… Jus dâ€™oignon (1 h) â†’ RinÃ§age â†’ SÃ©chage","ğŸ’§ Minoxidil 5 %"],
    s:["ğŸ§… Jus dâ€™oignon (1 h) â†’ RinÃ§age â†’ SÃ©chage","ğŸ’§ Minoxidil 5 %"],
    note:"Routine classique â€” stimulation + hydratation interne." },
  { j:"Mercredi", tag:"Veille soin huile",
    m:["ğŸ§… Jus dâ€™oignon (1 h) â†’ RinÃ§age â†’ SÃ©chage","ğŸ’§ Minoxidil 5 %"],
    s:["ğŸ’†â€â™‚ï¸ Huile dâ€™oignon maison (2 h ou nuit, charlotte)"],
    note:"Masse doucement le cuir chevelu pendant lâ€™huile." },
  { j:"Jeudi", tag:"Jour de shampoing",
    m:["ğŸ§´ RinÃ§age huile â†’ Shampoing doux â†’ SÃ©chage","ğŸ’§ Minoxidil 5 %"],
    s:["ğŸ’§ Minoxidil 5 %"],
    note:"Laisse bien respirer le cuir chevelu." },
  { j:"Vendredi",
    m:["ğŸ§… Jus dâ€™oignon (1 h) â†’ RinÃ§age â†’ SÃ©chage","ğŸ’§ Minoxidil 5 %"],
    s:["ğŸ§… Jus dâ€™oignon (1 h) â†’ RinÃ§age â†’ SÃ©chage","ğŸ’§ Minoxidil 5 %"],
    note:"Entretien & rÃ©gÃ©nÃ©ration." },
  { j:"Samedi", tag:"Veille soin huile",
    m:["ğŸ§… Jus dâ€™oignon (1 h) â†’ RinÃ§age â†’ SÃ©chage","ğŸ’§ Minoxidil 5 %"],
    s:["ğŸ’†â€â™‚ï¸ Huile dâ€™oignon maison (2 h ou nuit)"],
    note:"IdÃ©al avant repos dominical." },
  { j:"Dimanche",
    m:["ğŸ§´ RinÃ§age de lâ€™huile (pas de shampoing si propre)"],
    s:["ğŸ§˜ Routine libre / mini-massage"],
    note:"RÃ©cupÃ©ration & visualisation de la repousse ğŸŒ±." }
];
const table = document.getElementById('weekGrid');
["Jour","Matin","Soir","Notes"].forEach(h=>{const d=document.createElement('div');d.className='head';d.textContent=h;table.appendChild(d);});
const KEY="cap-week-v2";
const saved=JSON.parse(localStorage.getItem(KEY)||"{}");
function chk(id, text){
  const L=document.createElement('label');
  const c=document.createElement('input'); c.type='checkbox'; c.checked=!!saved[id];
  c.addEventListener('change',()=>{saved[id]=c.checked;localStorage.setItem(KEY,JSON.stringify(saved));});
  const s=document.createElement('span'); s.textContent=text;
  L.appendChild(c); L.appendChild(s); return L;
}
week.forEach((d,di)=>{
  const cDay=document.createElement('div'); cDay.className='cell';
  cDay.innerHTML=`<div class="day">${d.j}${d.tag?`<div class="tag subtag">${d.tag}</div>`:''}</div>`;
  const cM=document.createElement('div'); cM.className='cell'; const tm=document.createElement('div'); tm.className='todo';
  d.m.forEach((t,ti)=>tm.appendChild(chk(`m-${di}-${ti}`,t))); cM.appendChild(tm);
  const cS=document.createElement('div'); cS.className='cell'; const ts=document.createElement('div'); ts.className='todo';
  d.s.forEach((t,ti)=>ts.appendChild(chk(`s-${di}-${ti}`,t))); cS.appendChild(ts);
  const cN=document.createElement('div'); cN.className='cell'; cN.innerHTML=`<div class="note">${d.note}</div>`;
  [cDay,cM,cS,cN].forEach(x=>table.appendChild(x));
});

/* ---------- Phases KÃ©ratine : calcul automatique du dosage du jour ---------- */
function fmt(d){return d.toISOString().slice(0,10);}
function daysSince(start){
  const s=new Date(start); const t=new Date(); s.setHours(0,0,0,0); t.setHours(0,0,0,0);
  return Math.floor((t - s)/86400000)+1; // J1 = jour du dÃ©but
}
/* Attack: P1 J1-15 -> 2 gÃ©l/j ; P2 J16-45 -> 3 gÃ©l/j */
const AKEY="ker-attack-start";
const startAttack=document.getElementById('startAttack');
const attackStatus=document.getElementById('attackStatus');
startAttack.value=localStorage.getItem(AKEY)||"";
function updAttack(){
  const v=startAttack.value;
  if(!v){attackStatus.textContent="Jour â€” Dosage â€”";return;}
  localStorage.setItem(AKEY,v);
  const j=daysSince(v);
  let phase="", dose="";
  if(j<1){phase="(pas commencÃ©)";dose="â€”";}
  else if(j<=15){phase=`Jour ${j} â€¢ Phase 1`;dose="2 gÃ©lules / jour";}
  else if(j<=45){phase=`Jour ${j} â€¢ Phase 2`;dose="3 gÃ©lules / jour";}
  else {phase=`Jour ${j} â€¢ Fin de lâ€™attaque`;dose="â€”";}
  attackStatus.textContent = `${phase} Â· ${dose}`;
}
startAttack.addEventListener('change',updAttack);
document.getElementById('todayAttack').addEventListener('click',()=>{startAttack.value=fmt(new Date());updAttack();});
document.getElementById('resetAttack').addEventListener('click',()=>{localStorage.removeItem(AKEY);startAttack.value="";updAttack();});
updAttack();

/* Maintenance: P1 J1-30 -> 1 gÃ©l/j ; P2 J31-75 -> 2 gÃ©l/j */
const MKEY="ker-maint-start";
const startMaint=document.getElementById('startMaint');
const maintStatus=document.getElementById('maintStatus');
startMaint.value=localStorage.getItem(MKEY)||"";
function updMaint(){
  const v=startMaint.value;
  if(!v){maintStatus.textContent="Jour â€” Dosage â€”";return;}
  localStorage.setItem(MKEY,v);
  const j=daysSince(v);
  let phase="", dose="";
  if(j<1){phase="(pas commencÃ©)";dose="â€”";}
  else if(j<=30){phase=`Jour ${j} â€¢ Phase 1`;dose="1 gÃ©lule / jour";}
  else if(j<=75){phase=`Jour ${j} â€¢ Phase 2`;dose="2 gÃ©lules / jour";}
  else {phase=`Jour ${j} â€¢ Fin de lâ€™entretien`;dose="â€”";}
  maintStatus.textContent = `${phase} Â· ${dose}`;
}
startMaint.addEventListener('change',updMaint);
document.getElementById('todayMaint').addEventListener('click',()=>{startMaint.value=fmt(new Date());updMaint();});
document.getElementById('resetMaint').addEventListener('click',()=>{localStorage.removeItem(MKEY);startMaint.value="";updMaint();});
updMaint();
</script>
</body>
</html>
